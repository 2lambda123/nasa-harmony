kind: ConfigMap
apiVersion: v1
metadata:
  name: alertmanager-config
  namespace: monitoring
data:
  config.yml: |-
    global:
    templates:
      - '/etc/alertmanager/*.tmpl'
    route:
      receiver: default
      group_by: [alertname]
      group_wait: 30s
      group_interval: 5m
      repeat_interval: 2h
      routes:
    receivers:
      - name: 'default'
        sns_configs:
        - topic_arn: $PROMETHEUS_ALERTS_ARN
          subject: '[Alert Manager $CLIENT_ID] {{ .GroupLabels.alertname }}'
          sigv4:
            region: $AWS_DEFAULT_REGION
            access_key: $AWS_ACCESS_KEY_ID
            secret_key: $AWS_SECRET_ACCESS_KEY