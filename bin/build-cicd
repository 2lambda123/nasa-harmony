#!/bin/bash

# build services - only to be used in CICD

chown -R root:root .
set -ex
corepack enable pnpm
pnpm i

for subdir in services/*; do
    if [[ -d "${subdir}" ] && [ "${subdir}" != "services/harmony" ]]; then
        pushd "${subdir}"
        pnpm build
        popd
    fi
done

chown -R 500:502 .